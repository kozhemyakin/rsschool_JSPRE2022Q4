(()=>{"use strict";const e=[{title:"Aqua Caelestis",src:"./assets/sounds/Aqua Caelestis.mp3",duration:"00:58"},{title:"River Flows In You",src:"./assets/sounds/River Flows In You.mp3",duration:"03:50"}];let t;function n(){const e=(new Date).toLocaleDateString("en-En",{weekday:"long",month:"long",day:"numeric"});document.querySelector(".date").textContent=e}window.addEventListener("load",(()=>{p(),function(e,t){for(const[n,o]of Object.entries(t.en))if(n===e)return document.querySelector(".greeting").textContent=t.en[`${e}`]}(o(),b),n()})),function e(){const t=(new Date).toLocaleTimeString();document.querySelector(".time").textContent=t,setTimeout(e,1e3),setTimeout(n,36e3)}();const o=()=>{const e=(new Date).getHours();return e<12?"morning":e<17?"afternoon":e<20?"evening":"night"},a=document.querySelector(".name");a.value=localStorage.getItem("name"),document.querySelector(".name").addEventListener("input",(function(){localStorage.setItem("name",a.value.trim())}));const c=(e,t)=>{const n=new Image;n.src=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${e}/${t}.jpg`,n.onload=()=>{document.body.style.backgroundImage=`url(${n.src})`}};c(o(),(20,t=1+Math.floor(20*Math.random()),t<10?"0"+t:t)),document.querySelector(".slide-prev").addEventListener("click",(function(){t=Number(t)-1,0===t?t=20:t<10&&(t="0"+t),c(o(),t)})),document.querySelector(".slide-next").addEventListener("click",(function(){t=Number(t)+1,21===t?t="01":t<10&&(t="0"+t),c(o(),t)}));const r=document.querySelector(".weather-icon"),i=document.querySelector(".temperature"),s=document.querySelector(".weather-description"),l=document.querySelector(".wind"),u=document.querySelector(".humidity");let d=document.querySelector(".city");null==localStorage.getItem("city")&&localStorage.setItem("city","Minsk");let m=`https://api.openweathermap.org/data/2.5/weather?q=${localStorage.getItem("city")}&lang=en&appid=08f2a575dda978b9c539199e54df03b0&units=metric`;async function g(){const e=await fetch(m),t=await e.json();r.className="weather-icon owf";try{i.classList.remove("weather-error"),r.classList.add(`owf-${t.weather[0].id}`),i.textContent=`${Math.round(t.main.temp)}°C`,s.textContent=t.weather[0].description,l.textContent=Math.floor(t.wind.speed)+" m/s",u.textContent=t.main.humidity+" %"}catch(e){""===d.value?i.textContent="Please, enter city name":i.textContent="City name is incorrect!",i.classList.add("weather-error"),s.textContent="",l.textContent="",u.textContent=""}}g(),document.querySelector(".city").addEventListener("change",(()=>{let e=document.querySelector(".city");console.log("city.value=",e.value," LS=",localStorage.getItem("city")),m=""===e.value&&null==localStorage.getItem("city")?"https://api.openweathermap.org/data/2.5/weather?q=Minsk&lang=en&appid=08f2a575dda978b9c539199e54df03b0&units=metric":null!==localStorage.getItem("city")?`https://api.openweathermap.org/data/2.5/weather?q=${localStorage.getItem("city")}&lang=en&appid=08f2a575dda978b9c539199e54df03b0&units=metric`:`https://api.openweathermap.org/data/2.5/weather?q=${e.value}&lang=en&appid=08f2a575dda978b9c539199e54df03b0&units=metric`,localStorage.setItem("city",e.value.trim()),g()}));const y=document.querySelector(".city");y.value=localStorage.getItem("city"),document.querySelector(".city").addEventListener("input",(function(){localStorage.setItem("city",y.value.trim())}));const p=async()=>{const e=await fetch("./assets/quotesOfTheDay/data.json"),t=await e.json(),n=1+Math.floor(Math.random()*t.quotes.length-1);document.querySelector(".quote").textContent=t.quotes[`${n}`].text,document.querySelector(".author").textContent=t.quotes[`${n}`].author};document.querySelector(".change-quote").addEventListener("click",p);let h=0;const S=document.querySelector(".play"),q=document.querySelector(".play-prev"),f=document.querySelector(".play-next");function w(){S.classList.toggle("pause")}q.addEventListener("click",(function(){h--,h<0&&(h=e.length-1),S.classList.contains("pause")||w(),I.src=e[h].src,I.play(),x()})),f.addEventListener("click",(function(){h++,h>e.length-1&&(h=0),S.classList.contains("pause")||w(),I.src=e[h].src,I.play(),x()}));const v=document.querySelector(".play-list");e.forEach((e=>{const t=document.createElement("li");t.classList.add("play-item"),t.textContent=`${e.title} ${e.duration}`,v.append(t)}));const L=document.querySelector("ul > li:nth-child(1)"),C=document.querySelector("ul > li:nth-child(2)");function x(){L.classList.toggle("item-active"),C.classList.toggle("item-active")}L.classList.add("item-active");const I=new Audio;S.addEventListener("click",(function(){S.classList.contains("pause")?I.pause():(I.src=e[h].src,I.currentTime=0,I.play()),w()}));const b={en:{morning:"Good morning",afternoon:"Good afternoon",evening:"Good evening",night:"Good night",placeholder:"[Enter name]"},ru:{morning:"Доброе утро",afternoon:"Добрый день",evening:"Добрый вечер",night:"Доброй ночи",placeholder:"[Введите имя]"}}})();